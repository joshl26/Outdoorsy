<!DOCTYPE html>
<html lang="en">
  X

  <body class="d-flex flex-column page-X">
    <!-- Skip to main content for accessibility -->
    <a href="#main-content" class="skip-link">Skip to main content</a>

    X

    <!-- Flash messages / alerts -->
    
      <div class="container mt-3">
        <div class="alert alert-success alert-dismissible fade show" role="alert">
          X
          <button 
            type="button" 
            class="btn-close" 
            data-bs-dismiss="alert" 
            aria-label="Close alert"
          ></button>
        </div>
      </div>
    
    
    
      <div class="container mt-3">
        <div class="alert alert-danger alert-dismissible fade show" role="alert">
          X
          <button 
            type="button" 
            class="btn-close" 
            data-bs-dismiss="alert" 
            aria-label="Close alert"
          ></button>
        </div>
      </div>
    

    <!-- Main content area -->
    
    <main id="main-content" class="X" aria-label="X">
      X
    </main>

    X

    <!-- Bootstrap JS Bundle with Popper -->
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-geWF76RCwLtnZ8qwWowPQNguL3RmwHVBC9FhGdlKrxdiJJigb/j/68SIy3Te4Bkz"
      crossorigin="anonymous"
      defer
    ></script>

    <!-- bs-custom-file-input -->
    <script
      src="https://cdn.jsdelivr.net/npm/bs-custom-file-input/dist/bs-custom-file-input.min.js"
      defer
    ></script>

    <!-- Custom JavaScript for enhancements -->
    <script defer>
      document.addEventListener('DOMContentLoaded', function() {
        // Initialize custom file input
        if (typeof bsCustomFileInput !== 'undefined') {
          bsCustomFileInput.init();
        }

        // Add scrolled class to navbar on scroll
        const navbar = document.querySelector('.navbar');
        if (navbar) {
          const handleScroll = debounce(function() {
            if (window.scrollY > 50) {
              navbar.classList.add('scrolled');
            } else {
              navbar.classList.remove('scrolled');
            }
          }, 10);
          
          window.addEventListener('scroll', handleScroll, { passive: true });
        }

        // Smooth scroll for anchor links
        document.querySelectorAll('a[href^="#"]').forEach(anchor => {
          anchor.addEventListener('click', function (e) {
            const href = this.getAttribute('href');
            if (href === '#') return;
            
            const target = document.querySelector(href);
            if (target) {
              e.preventDefault();
              target.scrollIntoView({
                behavior: 'smooth',
                block: 'start'
              });
              
              // Update focus for accessibility
              target.setAttribute('tabindex', '-1');
              target.focus();
            }
          });
        });

        // Auto-dismiss alerts after 5 seconds
        const alerts = document.querySelectorAll('.alert:not(.alert-permanent)');
        alerts.forEach(alert => {
          setTimeout(() => {
            const bsAlert = bootstrap.Alert.getOrCreateInstance(alert);
            bsAlert.close();
          }, 5000);
        });

        // Intersection Observer for fade-in animations
        const observerOptions = {
          threshold: 0.1,
          rootMargin: '0px 0px -50px 0px'
        };

        const fadeInObserver = new IntersectionObserver(function(entries) {
          entries.forEach(entry => {
            if (entry.isIntersecting) {
              entry.target.classList.add('fade-in');
              fadeInObserver.unobserve(entry.target);
            }
          });
        }, observerOptions);

        // Observe all cards and feature cards for animation
        document.querySelectorAll('.card, .feature-card, .stat-item').forEach(element => {
          fadeInObserver.observe(element);
        });

        // Lazy load images
        if ('IntersectionObserver' in window) {
          const imageObserver = new IntersectionObserver((entries, observer) => {
            entries.forEach(entry => {
              if (entry.isIntersecting) {
                const img = entry.target;
                if (img.dataset.src) {
                  img.src = img.dataset.src;
                  img.removeAttribute('data-src');
                  img.classList.add('loaded');
                  observer.unobserve(img);
                }
              }
            });
          });

          document.querySelectorAll('img[data-src]').forEach(img => {
            imageObserver.observe(img);
          });
        }

        // Form validation enhancement
        const forms = document.querySelectorAll('.needs-validation');
        forms.forEach(form => {
          form.addEventListener('submit', function(event) {
            if (!form.checkValidity()) {
              event.preventDefault();
              event.stopPropagation();
              
              // Focus on first invalid field
              const firstInvalid = form.querySelector(':invalid');
              if (firstInvalid) {
                firstInvalid.focus();
              }
            }
            form.classList.add('was-validated');
          });
        });

        // Add loading state to buttons on form submit
        const submitButtons = document.querySelectorAll('form button[type="submit"]');
        submitButtons.forEach(button => {
          const form = button.closest('form');
          if (form) {
            form.addEventListener('submit', function(e) {
              if (form.checkValidity()) {
                button.classList.add('loading');
                button.disabled = true;
                const originalText = button.innerHTML;
                button.innerHTML = '<span class="spinner-border spinner-border-sm me-2" role="status" aria-hidden="true"></span>Loading...';
                
                // Re-enable button after 5 seconds as fallback
                setTimeout(() => {
                  button.classList.remove('loading');
                  button.disabled = false;
                  button.innerHTML = originalText;
                }, 5000);
              }
            });
          }
        });

        // Mapbox popup enhancement
        if (typeof mapboxgl !== 'undefined') {
          const style = document.createElement('style');
          style.textContent = `
            .mapboxgl-popup-content {
              font-family: inherit !important;
            }
          `;
          document.head.appendChild(style);
        }

        // Announce page changes for screen readers
        const announcer = document.createElement('div');
        announcer.setAttribute('role', 'status');
        announcer.setAttribute('aria-live', 'polite');
        announcer.setAttribute('aria-atomic', 'true');
        announcer.className = 'sr-only';
        document.body.appendChild(announcer);
      });

      // Performance optimization: Debounce function
      function debounce(func, wait) {
        let timeout;
        return function executedFunction(...args) {
          const later = () => {
            clearTimeout(timeout);
            func(...args);
          };
          clearTimeout(timeout);
          timeout = setTimeout(later, wait);
        };
      }
    </script>


    <!-- Analytics placeholder (add your tracking code here) -->
    <!-- <script async src="https://www.googletagmanager.com/gtag/js?id=GA_MEASUREMENT_ID"></script> -->
  </body>
</html>